flowchart TD
    A[ğŸ¯ Input: Semiprime N = p Ã— q] --> B{ğŸ“Š Number Analysis}
    
    B --> C{ğŸ” Size Classification}
    C -->|N < 1000| D[ğŸ¯ Twin Prime Strategy<br/>Î¾ = 1/50]
    C -->|1000 â‰¤ N < 10000| E[ğŸ“ˆ Medium Size Strategy<br/>Î¾ = 1/1000]
    C -->|N â‰¥ 10000| F[ğŸŒŸ Universal Strategy<br/>Î¾ = 1/100]
    
    B --> G{ğŸµ Special Case Detection}
    G -->|Ramanujan 1729<br/>Mersenne 2047| H[ğŸ”¬ Special Cases Strategy<br/>Î¾ = 1/42]
    G -->|Standard Numbers| I[ğŸ¤– Auto-Select Strategy]
    
    D --> J[âš™ï¸ T0 Period Generator]
    E --> J
    F --> J
    H --> J
    I --> J
    
    J --> K[ğŸ“ Generate Test Periods<br/>T = âˆšN Â± Î´]
    K --> L[ğŸ§® Rational Arithmetic Evaluation]
    
    L --> M{ğŸ¼ Period Resonance Check}
    M -->|Score > Threshold| N[âœ¨ Strong Resonance Found]
    M -->|Score â‰¤ Threshold| O[ğŸ”„ Try Next Period]
    
    O --> K
    
    N --> P[ğŸ” Factor Extraction]
    P --> Q[ğŸ“ Compute: p = gcd(a^T - 1, N)]
    Q --> R{âœ… Valid Factor Found?}
    
    R -->|Yes: p > 1, p < N| S[ğŸ‰ SUCCESS<br/>Return factors p, q = N/p]
    R -->|No: p = 1 or p = N| T{â° Timeout Check}
    
    T -->|Time < Limit| O
    T -->|Time â‰¥ Limit| U[âŒ TIMEOUT<br/>Fall back to classical method]
    
    S --> V[ğŸ“Š Performance Metrics<br/>â€¢ Execution time<br/>â€¢ Iterations count<br/>â€¢ Î¾-strategy used<br/>â€¢ Resonance score]
    U --> W[ğŸ“ˆ Classical Fallback<br/>Trial Division / Fermat]
    
    style A fill:#e1f5fe
    style S fill:#c8e6c9
    style U fill:#ffcdd2
    style V fill:#f3e5f5
    style J fill:#fff3e0
    style M fill:#e8f5e8
    style N fill:#c8e6c9